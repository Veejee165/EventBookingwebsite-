<div class="container">
  <nav>
    <ul>
      <li><a routerLink="/">Home</a></li>
      <li><a routerLink="/events">Events</a></li>
      <li *ngIf="loggedIn" class="auth-buttons">
        <span>You are logged in as {{ username }}</span>
        <button (click)="goToUserProfile()">Go to Profile</button>
      </li>
      <li class="auth-buttons" *ngIf="!loggedIn">
        <a routerLink="/login">Log in</a>
        <a routerLink="/register">Register</a>
      </li>
    </ul>
  </nav>
  <div class="background-image"></div>
  <div class="content">
    <div class="search-bar">
      <input type="text" [(ngModel)]="searchEventName" placeholder="Search by event name">
      <input type="text" [(ngModel)]="searchLocation" placeholder="Filter by location">
      <button (click)="searchEvents()">Search</button>
    </div>
    <div class="event-list">
      <h3>Upcoming Events</h3>
      <div *ngFor="let event of filteredEvents" (click)="goToEventDetails(event._id)">
        <h4>{{ event.title }}</h4>
        <p>{{ event.description }}</p>
        <p>Date: {{ event.start_date | date }}</p>
        <p>Time: {{ event.start_time }} - {{ event.end_time }}</p>
        <p>Location: {{ event.city }}, {{ event.state }}, {{ event.country }}</p>
        <td>
          <!-- Use the safe URL for the image source -->
          <img [src]="event.image" alt="Event Image" height="50">
        </td>
      </div>
      <div *ngIf="filteredEvents.length === 0">
        <p>No upcoming events found.</p>
      </div>
    </div>
  </div>